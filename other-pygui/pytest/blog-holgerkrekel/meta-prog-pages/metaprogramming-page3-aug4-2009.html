<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>metaprogramming | metaprogramming and politics | Page 3</title>
<link rel="pingback" href="http://holgerkrekel.net/xmlrpc.php">
<meta name="google-site-verification" content="AcZhUPE5jxZKf3FnzFTBpBf37euoXeeAlFlJxzqABqI">
		<script src="metaprogramming-page3-aug4-2009_files/remote-login.php" type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel="alternate" type="application/rss+xml" title="metaprogramming and politics » Feed" href="http://holgerkrekel.net/feed/">
<link rel="alternate" type="application/rss+xml" title="metaprogramming and politics » Comments Feed" href="http://holgerkrekel.net/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="metaprogramming and politics » metaprogramming Category Feed" href="http://holgerkrekel.net/category/metaprogramming/feed/">
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="metaprogramming-page3-aug4-2009_files/a_002.css" type="text/css" media="all">
<!--[if IE 6]>
<link rel='stylesheet' id='journalist-ie6-css'  href='https://s0.wp.com/wp-content/themes/pub/journalist/ie6.css?m=1270837707g&#038;ver=4.2-RC4-32277' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="all-css-2" href="metaprogramming-page3-aug4-2009_files/a.css" type="text/css" media="all">
<link rel="stylesheet" id="print-css-3" href="metaprogramming-page3-aug4-2009_files/global-print.css" type="text/css" media="print">
<link rel="stylesheet" id="all-css-4" href="metaprogramming-page3-aug4-2009_files/global.css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/a_002"></script><style type="text/css"></style>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://tetamap.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress.com">
<link rel="shortcut icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/dbedfd22b9c524039edad5aa658c7e40?s=16" sizes="16x16">
<link rel="icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/dbedfd22b9c524039edad5aa658c7e40?s=16" sizes="16x16">
<link rel="apple-touch-icon-precomposed" href="http://1.gravatar.com/blavatar/b3a31bdc09d8a9d15ba87f69d34ece75?s=114">
<link rel="openid.server" href="http://tetamap.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://tetamap.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://holgerkrekel.net/osd.xml" title="metaprogramming and politics">
<link rel="search" type="application/opensearchdescription+xml" href="https://wordpress.com/opensearch.xml" title="WordPress.com">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="metaprogramming and politics"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Decentralize. Take the red pill."><meta name="msapplication-task" content="name=Subscribe;action-uri=http://holgerkrekel.net/feed/;icon-uri=http://1.gravatar.com/blavatar/dbedfd22b9c524039edad5aa658c7e40?s=16"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="title" content="Posts about metaprogramming on metaprogramming and politics">
<meta name="description" content="Posts about metaprogramming written by holger krekel">
<link href="metaprogramming-page3-aug4-2009_files/shCore.css" type="text/css" rel="stylesheet"><link href="metaprogramming-page3-aug4-2009_files/shThemeDefault.css" type="text/css" rel="stylesheet"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="metaprogramming-page3-aug4-2009_files/a_003.css">
		<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="metaprogramming-page3-aug4-2009_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="metaprogramming-page3-aug4-2009_files/services.css"></head>

<body data-twttr-rendered="true" class="archive paged category category-metaprogramming category-36279 paged-3 category-paged-3 mp6 typekit-enabled customizer-styles-applied highlander-enabled highlander-light infinite-scroll neverending">
<div id="container" class="group">

<h1><a href="http://holgerkrekel.net/">metaprogramming and politics</a></h1>
<div id="bubble"><p>Decentralize. Take the red pill.</p></div> <!-- erase this line if you want to turn the bubble off -->

<div id="content">

<h2 class="archive">Archive for the ‘<strong>metaprogramming</strong>’ Category</h2>

<div class="post-224 post type-post status-publish format-standard hentry category-metaprogramming category-testing tag-metaprogramming tag-testing">
	<h2 id="post-224"><a href="http://holgerkrekel.net/2009/08/04/pylib-1-0-0-released-the-testing-with-python-innovations-continue/" rel="bookmark">pylib 1.0.0 released: the testing-with-python innovations&nbsp;continue</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/08/04/pylib-1-0-0-released-the-testing-with-python-innovations-continue/#comments">with 5 comments</a></p>
	
	<div class="main">
		<p>Took a few betas but finally i uploaded a <a class="reference external" href="http://pypi.python.org/pypi/py">1.0.0 py lib release</a>, featuring the mature and powerful py.test tool and "execnet-style" <em>elastic</em>
 distributed programming.  With the new release, there are many new 
advanced automated testing features – here is a quick summary:</p>
<ul class="simple">
<li><a class="reference external" href="http://codespeak.net/py/dist/test/funcargs.html">funcargs</a> – pythonic zero-boilerplate fixtures for Python test functions :
<ul>
<li>totally separates test code, test configuration and test setup</li>
<li>ideal for integration and functional tests</li>
<li>allows for flexible and natural test parametrization schemes</li>
</ul>
</li>
<li>new <a class="reference external" href="http://codespeak.net/py/dist/test/extend.html">plugin architecture</a>, allowing easy-to-write project-specific and cross-project single-file plugins.   The most notable new external plugin is <a class="reference external" href="http://codespeak.net/py/dist/test/plugin/oejskit.html">oejskit</a> which naturally enables <strong>running and reporting of javascript-unittests in real-life browsers</strong>.</li>
<li>many new features done in easy-to-improve <a class="reference external" href="http://codespeak.net/py/dist/test/plugin/index.html">default plugins</a>, highlights:
<ul>
<li>xfail: mark tests as "expected to fail" and report separately.</li>
<li>pastebin: automatically send tracebacks to pocoo paste service</li>
<li>capture: flexibly capture stdout/stderr of subprocesses, per-test …</li>
<li>monkeypatch: safely monkeypatch modules/classes from within tests</li>
<li>unittest: run and integrate traditional unittest.py tests</li>
<li>figleaf: generate html coverage reports with the figleaf module</li>
<li>resultlog: generate buildbot-friendly reporting output</li>
<li>…</li>
</ul>
</li>
<li><a class="reference external" href="http://codespeak.net/py/dist/test/dist.html">distributed testing</a> and <a class="reference external" href="http://codespeak.net/py/dist/execnet.html">elastic distributed execution</a>:
<ul>
<li>new unified "TX" URL scheme for specifying remote processes</li>
<li>new distribution modes "–dist=each" and "–dist=load"</li>
<li>new sync/async ways to handle 1:N communication</li>
<li>improved documentation</li>
</ul>
</li>
</ul>
<p>The py lib continues to offer most of the functionality used by the testing tool in <a class="reference external" href="http://pylib.org/">independent namespaces</a>.</p>
<p>Some non-test related code, notably greenlets/co-routines and 
api-generation now live as their own projects which simplifies the 
installation procedure because no C-Extensions are required anymore.</p>
<p>The whole package should work well with Linux, Win32 and OSX, on 
Python 2.3, 2.4, 2.5 and 2.6.  (Expect Python3 compatibility soon!)</p>
<p>For more info, see the py.test and py lib documentation:</p>
<blockquote>
<p><a class="reference external" href="http://pytest.org/">http://pytest.org</a></p>
<p><a class="reference external" href="http://pylib.org/">http://pylib.org</a></p>
</blockquote>
<p>have fun, holger</p>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>August 4, 2009 at 10:05 am</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a>, <a href="http://holgerkrekel.net/category/testing/" rel="category tag">testing</a></p>
			<p>Tagged with <a href="http://holgerkrekel.net/tag/metaprogramming/" rel="tag">metaprogramming</a>, <a href="http://holgerkrekel.net/tag/testing/" rel="tag">testing</a></p>		</div>
	</div>
</div>
<div class="post-217 post type-post status-publish format-standard hentry category-metaprogramming">
	<h2 id="post-217"><a href="http://holgerkrekel.net/2009/05/18/code-centered-issue-tracking/" rel="bookmark">code-centered issue tracking?</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/05/18/code-centered-issue-tracking/#comments">with 12 comments</a></p>
	
	<div class="main">
		<p>Is there anything that allows code-centered issue tracking? Recently, Gustavo Niemeyer had an <a class="reference external" href="http://blog.labix.org/2009/05/15/class-member-access-control-enforcement-vs-convention">interesting piece up</a>
 where he suggests private/protected syntax for Python.  His point is 
that code collaboration doesn’t otherwise work in larger uncontrolled 
environments of dev groups.  I agree with most of his observations but 
not his conclusion.  I’d rather like to see reduced communication costs 
for changing code.  Here is an example of what i mean. If see a code 
fragment like this:</p>
<div><div id="highlighter_744591" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">somefunc(</code><code class="python color1">self</code><code class="python plain">, x, y, z):</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">._cache </code><code class="python keyword">=</code> <code class="python plain">func(x) </code><code class="python keyword">+</code> <code class="python plain">other(y)</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.z </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">._cache </code><code class="python keyword">+</code> <code class="python plain">third(z)</code></div></div></td></tr></tbody></table></div></div>
<p>i want to be able to visually mark this code, write a comment like:</p>
<blockquote><p>
<em>hey, i need the third(z) value, and doing self.z-self._cache feels bad – can you help?</em></p></blockquote>
<p>and i want my development environment to automatically route this 
question with exact code refs to the maintainers of the code. This 
should not take longer than 20 seconds and be automatically managed.</p>
<p>On the receiving side, as the maintainer, i want to get notified and be able to say:</p>
<div><div id="highlighter_717320" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">getissues mypkg</code><code class="bash plain">/subpkg</code></div></div></td></tr></tbody></table></div></div>
<p>and have it automatically list me all files and issues for it. So i easily see the above question, do a patch, and issue:</p>
<div><div id="highlighter_122786" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">sendpatch PATCHNAME</code></div></div></td></tr></tbody></table></div></div>
<p>and type in a message.  Maybe automatically CCed to other library 
maintainers, a mailing list etc.  As the original sender i get back a 
mail and can use a cmdline tool to apply the patch, give feedback and so
 forth …</p>
<p>IOW, i want to have tools that automatically manage the 
issue-addressing, code-referencing, finding-out about package 
info/release numbers, format the comment related to the cited code, send
 the mail, register an issue automatically and so on.  Is there 
something like this?</p>
<p>If not: doesn’t we already have most of the pieces?  What makes sense
 to use for it?  Mercurial and Patch queues?  Maybe the new Bitbucket 
API? Integrate with existing issue tracker?  First goal would be to have
 it manage itself, i guess <span class="wp-smiley wp-emoji wp-emoji-smile" title=":)">:)</span></p>
<p>cheers, holger</p>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>May 18, 2009 at 11:35 am</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a></p>
					</div>
	</div>
</div>
<div class="post-195 post type-post status-publish format-standard hentry category-metaprogramming">
	<h2 id="post-195"><a href="http://holgerkrekel.net/2009/05/14/putting-test-hooks-into-local-and-global-plugins/" rel="bookmark">Putting test-hooks into local and global&nbsp;plugins</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/05/14/putting-test-hooks-into-local-and-global-plugins/#comments">leave a comment »</a></p>
	
	<div class="main">
		<p>(<i>updated to match 1.0 API and features</i>) I’d like to clarify py.test’s hook lookup and showcase the ease of writing things into per-project or global plugins.  The <tt class="docutils literal"><span class="pre">pytest_generate_tests</span></tt> was discussed in the <a class="reference external" href="http://tetamap.wordpress.com/2009/05/13/parametrizing">last blog post on parametrizing tests</a>.  Here is where you can write this hook down:</p>
<blockquote>
<ul class="simple">
<li>in the test module</li>
<li>in a local plugin</li>
<li>or in a global plugin</li>
</ul>
</blockquote>
<p>The last blog post showed  how to put the hook directly into the test
 module.  Let’s take a look now what putting a hook into a "local or 
global plugin" means.</p>
<div class="section" id="putting-a-hook-in-a-local-plugin">
<h1>Putting a Hook in a local plugin</h1>
<p>Putting the generate-hook into a local plugin means to create a <tt class="docutils literal"><span class="pre">conftest.py</span></tt> file in your test directory or package root directory with these contents: </p>
<div><div id="highlighter_254631" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#./conftest.py</code></div><div class="line number2 index1 alt1"><code class="python keyword">def</code> <code class="python plain">pytest_generate_tests(metafunc):</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># exactly same implementation as module-level one</code></div></div></td></tr></tbody></table></div></div>
<p>As with test files and functions and arguments, <tt class="docutils literal"><span class="pre">conftest.py</span></tt> files and the exact name <tt class="docutils literal"><span class="pre">ConftestPlugin</span></tt> will be automatically discovered and the plugin be instantiated.</p>
</div>
<div class="section" id="put-hook-into-a-global-plugin">
<h1>Put hook into a global plugin</h1>
<p>Putting the generate-hook in a global cross-project plugin requires to invent a file or package name with a fixed  <tt class="docutils literal"><span class="pre">pytest_</span></tt> prefix.  Here is how you would write down the generate hook into a self-contained <tt class="docutils literal"><span class="pre">pytest_mygen.py</span></tt> file:</p>
<div><div id="highlighter_391944" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#./pytest_mygen.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">def</code> <code class="python plain">pytest_generate_tests(metafunc):</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># exactly same implementation as module-level one</code></div></div></td></tr></tbody></table></div></div>
<p>The hook name including its <tt class="docutils literal"><span class="pre">metafunc</span></tt> argument needs to be used exactly as decribed – loading your plugin will otherwise result in an error. </p>
</div>
<div class="section" id="activating-a-global-plugin">
<h1>Activating a global plugin</h1>
<p>While local plugins are automatically discovered, global plugins need to specified.  To activate a global plugin <tt class="docutils literal"><span class="pre">pytest_mygen</span></tt> you can use either of the following three ways:</p>
<div><div id="highlighter_176454" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">py.test </code><code class="python keyword">-</code><code class="python plain">p mygen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python comments"># for command line activation</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">export PYTEST_PLUGINS</code><code class="python keyword">=</code><code class="python plain">mygen&nbsp; </code><code class="python comments"># for shell/env activation</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">pytest_plugins </code><code class="python keyword">=</code> <code class="python string">"mygen"</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="python comments"># in a test module or conftest.py</code></div></div></td></tr></tbody></table></div></div>
<p>py.test loads command-line or environment-specified plugins very early so that plugins can add command line options.</p>
</div>
<div class="section" id="multiple-pytest-generate-hook-implementations">
<h1>multiple pytest_generate_hook implementations</h1>
<p>All existing <tt class="docutils literal"><span class="pre">pytests_generate_hooks</span></tt>
 hooks will be called once for each test function.  You can have 
multiple hooks but the generate-hook usually only acts on a specific 
funcarg by doing a check like this:</p>
<div><div id="highlighter_201618" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">if</code> <code class="python string">"myarg"</code> <code class="python keyword">in</code> <code class="python plain">metafunc.funcargnames:</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">...</code></div></div></td></tr></tbody></table></div></div>
<p>So, you say, what about a test function with multiple arguments – 
could each function argument come from a different generating provider 
factory?</p>
<p>This would mean that multiple generators act independently but want 
to collaborate and combine their values for a given test functions.  
Well, if you encounter a real need for it, please come forward and we’ll
 think up a fitting API extension.  A couple of days ago i had a 
"combining funcargs" API call implemented but decided to remove it 
because i try hard these days to only add features that have a proven 
need.</p>
</div>
<div class="section" id="concluding-note-on-putting-hooks-into-plugins">
<h1>Putting test support code into plugins FTW</h1>
<p>Lastly, let me point out that putting the <tt class="docutils literal"><span class="pre">pytest_generate_tests</span></tt>
 hook into a plugin allows the actual test code to stay igorant about 
the exact way how or where parametrization is implemented.   For 
example, adding command line options for influencing the generation or 
selection of parameter sets, including randomizing, would not change a 
single character in the test module and test code.</p>
<p>have fun and let me know what you think, holger</p>
</div>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>May 14, 2009 at 12:01 pm</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a></p>
					</div>
	</div>
</div>
<div class="post-164 post type-post status-publish format-standard hentry category-metaprogramming category-testing">
	<h2 id="post-164"><a href="http://holgerkrekel.net/2009/05/13/parametrizing-python-tests-generalized/" rel="bookmark">Parametrizing Python tests,&nbsp;generalized.</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/05/13/parametrizing-python-tests-generalized/#comments">with one comment</a></p>
	
	<div class="main">
		<p>Parametrizing test runs is a kind of a <a class="reference external" href="http://lists.idyll.org/pipermail/testing-in-python/2009-April/thread.html#1843">hot topic</a> with Python test tools. <a class="reference external" href="http://codespeak.net/py/trunk/test/test.html">py.test</a> recently grew a new <tt class="docutils literal"><span class="pre">pytest_generate_tests</span></tt> hook to parametrize tests. I am going to introduce it by providing ports of <a class="reference external" href="http://www.voidspace.org.uk/python/weblog/index.shtml">Michael Foord</a>‘s recent experiments with <a class="reference external" href="http://code.google.com/p/unittest-ext/source/browse/trunk/params.py">parametrizing unittest.py test cases</a> and an example from Rob Collins <a class="reference external" href="https://launchpad.net/testscenarios">testscenarios</a>
 unittest extension.   The gist of the new hook is that it allows to 
easily implement and combine these schemes.  It builds on the general 
idea of allowing python test functions to receive function arguments 
("funcargs") – and defining mechanisms on how to provide them.</p>
<div class="section" id="the-parametrizer-example-ported">
<h2>The parametrizer example, ported</h2>
<p>The idea of <a class="reference external" href="http://www.voidspace.org.uk/python/weblog/index.shtml">Michael Foord</a>‘s <a class="reference external" href="http://code.google.com/p/unittest-ext/source/browse/trunk/params.py">Parametrizer</a>
 example is to define multiple sets of parameters and have specified 
test functions receive those arguments. Here is a direct port of 
Michael’s example to use py.test’s new hook:</p>
<div><div id="highlighter_228406" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#./test_parametrize.py</code></div><div class="line number2 index1 alt1"><code class="python keyword">import</code> <code class="python plain">py</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python keyword">def</code> <code class="python plain">pytest_generate_tests(metafunc):</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># called once per each test function</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">funcargs </code><code class="python keyword">in</code> <code class="python plain">metafunc.</code><code class="python color1">cls</code><code class="python plain">.params[metafunc.function.__name__]:</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># schedule a new test function run with applied **funcargs</code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">metafunc.addcall(funcargs</code><code class="python keyword">=</code><code class="python plain">funcargs)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python keyword">class</code> <code class="python plain">TestClass:</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">params </code><code class="python keyword">=</code> <code class="python plain">{</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'test_equals'</code><code class="python plain">: [</code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">1</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">2</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">5</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">4</code><code class="python plain">)],</code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'test_zerodivision'</code><code class="python plain">: [</code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">1</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">0</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">2</code><code class="python plain">)],</code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_equals(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">assert</code> <code class="python plain">a </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">b</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_zerodivision(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number20 index19 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">py.test.raises(ZeroDivisionError, </code><code class="python string">"a/b"</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>py.test automatically discovers both the <tt class="docutils literal"><span class="pre">pytest_generate_tests</span></tt> hook and the two test functions.  For each test function it calls the hook, passing it a <a class="reference external" href="http://codespeak.net/py/trunk/test/funcargs.html#metafunc-object">metafunc object</a>
 which provides meta information about the test function and allows to 
add new tests during collection. Let’s see what just collecting the 
tests produces:</p>
<div><div id="highlighter_647477" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">$ py.test </code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">collectonly test_parametrize.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">&lt;Module </code><code class="python string">'test_parametrize.py'</code><code class="python plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;</code><code class="python plain">&lt;Class </code><code class="python string">'TestClass'</code><code class="python plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Instance </code><code class="python string">'()'</code><code class="python plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;FunctionCollector </code><code class="python string">'test_equals'</code><code class="python plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Function </code><code class="python string">'test_equals[0]'</code><code class="python plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Function </code><code class="python string">'test_equals[1]'</code><code class="python plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Function </code><code class="python string">'test_equals[2]'</code><code class="python plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;FunctionCollector </code><code class="python string">'test_zerodivision'</code><code class="python plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Function </code><code class="python string">'test_zerodivision[0]'</code><code class="python plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">&lt;Function </code><code class="python string">'test_zerodivision[1]'</code><code class="python plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>So we collected 5 actual runs of test functions. Let now run the test functions:</p>
<div><div id="highlighter_992246" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">$ py.test test_parametrize.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">test session starts </code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code></div><div class="line number4 index3 alt1"><code class="python plain">python: platform linux2 </code><code class="python keyword">-</code><code class="python keyword">-</code> <code class="python plain">Python </code><code class="python value">2.6</code><code class="python plain">.</code><code class="python value">2</code></div><div class="line number5 index4 alt2"><code class="python plain">test </code><code class="python functions">object</code> <code class="python value">1</code><code class="python plain">: test_parametrize.py</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">test_parametrize.py F.F.F</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">FAILURES </code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code></div><div class="line number10 index9 alt1"><code class="python plain">________________ TestClass.test_equals.test_equals[</code><code class="python value">0</code><code class="python plain">] _________________</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python color1">self</code> <code class="python keyword">=</code> <code class="python plain">&lt;test_parametrize.TestClass instance at </code><code class="python value">0x994f8ac</code><code class="python plain">&gt;, a </code><code class="python keyword">=</code> <code class="python value">1</code><code class="python plain">, b </code><code class="python keyword">=</code> <code class="python value">2</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_equals(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number15 index14 alt2"><code class="python plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python plain">a </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">b</code></div><div class="line number16 index15 alt1"><code class="python plain">E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python value">1</code> <code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">2</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="python plain">test_parametrize.py:</code><code class="python value">14</code><code class="python plain">: AssertionError</code></div><div class="line number19 index18 alt2"><code class="python plain">________________ TestClass.test_equals.test_equals[</code><code class="python value">2</code><code class="python plain">] _________________</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="python color1">self</code> <code class="python keyword">=</code> <code class="python plain">&lt;test_parametrize.TestClass instance at </code><code class="python value">0x994f8ac</code><code class="python plain">&gt;, a </code><code class="python keyword">=</code> <code class="python value">5</code><code class="python plain">, b </code><code class="python keyword">=</code> <code class="python value">4</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_equals(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number24 index23 alt1"><code class="python plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python plain">a </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">b</code></div><div class="line number25 index24 alt2"><code class="python plain">E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python value">5</code> <code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">4</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="python plain">test_parametrize.py:</code><code class="python value">14</code><code class="python plain">: AssertionError</code></div><div class="line number28 index27 alt1"><code class="python plain">__________ TestClass.test_zerodivision.test_zerodivision[</code><code class="python value">1</code><code class="python plain">] ___________</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="python color1">self</code> <code class="python keyword">=</code> <code class="python plain">&lt;test_parametrize.TestClass instance at </code><code class="python value">0x994f8ac</code><code class="python plain">&gt;, a </code><code class="python keyword">=</code> <code class="python value">3</code><code class="python plain">, b </code><code class="python keyword">=</code> <code class="python value">2</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_zerodivision(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number33 index32 alt2"><code class="python plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; py.test.raises(ZeroDivisionError, </code><code class="python string">"a/b"</code><code class="python plain">)</code></div><div class="line number34 index33 alt1"><code class="python plain">E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ExceptionFailure: </code><code class="python string">'DID NOT RAISE'</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="python plain">test_parametrize.py:</code><code class="python value">17</code><code class="python plain">: ExceptionFailure</code></div><div class="line number37 index36 alt2"><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">3</code> <code class="python plain">failed, </code><code class="python value">2</code> <code class="python plain">passed </code><code class="python keyword">in</code> <code class="python value">0.13</code> <code class="python plain">seconds </code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code></div></div></td></tr></tbody></table></div></div>
<p>You can easily see the failing tests and the parameters that the 
tests received. It also showcases py.test traceback reporting but that’s
 for another discussion.</p>
</div>
<div class="section" id="the-parametrizer-example-decorated">
<h2>The parametrizer example, decorated</h2>
<p>So, you say, what about having a decorator specifying test 
parameters? Here is the same example, letting our hook implement a 
decorator scheme:</p>
<div><div id="highlighter_548486" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#./test_parametrize2.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">import</code> <code class="python plain">py</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python keyword">def</code> <code class="python plain">params(funcarglist):</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">wrapper(function):</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">function.funcarglist </code><code class="python keyword">=</code> <code class="python plain">funcarglist</code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python plain">function</code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python plain">wrapper</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python keyword">def</code> <code class="python plain">pytest_generate_tests(metafunc):</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">funcargs </code><code class="python keyword">in</code> <code class="python functions">getattr</code><code class="python plain">(metafunc.function, </code><code class="python string">'funcarglist'</code><code class="python plain">, ()):</code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">metafunc.addcall(funcargs</code><code class="python keyword">=</code><code class="python plain">funcargs)</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python comments"># actual test code, above support code can live elsewhere</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="python keyword">class</code> <code class="python plain">TestClass:</code></div><div class="line number18 index17 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python decorator">@params</code><code class="python plain">([</code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">1</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">2</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">5</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">4</code><code class="python plain">)], )</code></div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_equals(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number20 index19 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">assert</code> <code class="python plain">a </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">b</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python decorator">@params</code><code class="python plain">([</code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">1</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">0</code><code class="python plain">), </code><code class="python functions">dict</code><code class="python plain">(a</code><code class="python keyword">=</code><code class="python value">3</code><code class="python plain">, b</code><code class="python keyword">=</code><code class="python value">2</code><code class="python plain">)])</code></div><div class="line number23 index22 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_zerodivision(</code><code class="python color1">self</code><code class="python plain">, a, b):</code></div><div class="line number24 index23 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">py.test.raises(ZeroDivisionError, </code><code class="python string">"a/b"</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>This variant leaves the "test specification" tightly coupled. Running it with <tt class="docutils literal"><span class="pre">py.test</span> <span class="pre">test_parametrize2.py</span></tt> provides the some output as for the first example port.</p>
</div>
<div class="section" id="a-quick-port-of-testscenarios">
<h2>A quick port of "testscenarios"</h2>
<p>Finally, let’s also port Rob Collin’s <a class="reference external" href="http://bazaar.launchpad.net/%7Elifeless/testscenarios/trunk/annotate/head%3A/doc/example.py">testscenario example</a>. Here is the implementation of the full mechanism with py.test and the tests in funcarg-style:</p>
<div><div id="highlighter_481972" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#./test_parametrize3.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">def</code> <code class="python plain">pytest_generate_tests(metafunc):</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">scenario </code><code class="python keyword">in</code> <code class="python plain">metafunc.</code><code class="python color1">cls</code><code class="python plain">.scenarios:</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">metafunc.addcall(</code><code class="python functions">id</code><code class="python keyword">=</code><code class="python plain">scenario[</code><code class="python value">0</code><code class="python plain">], funcargs</code><code class="python keyword">=</code><code class="python plain">scenario[</code><code class="python value">1</code><code class="python plain">])</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">scenario1 </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python string">'basic'</code><code class="python plain">, {</code><code class="python string">'attribute'</code><code class="python plain">: </code><code class="python string">'value'</code><code class="python plain">})</code></div><div class="line number8 index7 alt1"><code class="python plain">scenario2 </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python string">'advanced'</code><code class="python plain">, {</code><code class="python string">'attribute'</code><code class="python plain">: </code><code class="python string">'value2'</code><code class="python plain">})</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python keyword">class</code> <code class="python plain">TestSampleWithScenarios:</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">scenarios </code><code class="python keyword">=</code> <code class="python plain">[scenario1, scenario2]</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_demo(</code><code class="python color1">self</code><code class="python plain">, attribute):</code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">assert</code> <code class="python functions">isinstance</code><code class="python plain">(attribute, </code><code class="python functions">str</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>Let’s run it:</p>
<div><div id="highlighter_825115" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">$ py.test </code><code class="python keyword">-</code><code class="python plain">v test_parametrize3.py</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">test session starts </code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code></div><div class="line number4 index3 alt1"><code class="python plain">python: platform linux2 </code><code class="python keyword">-</code><code class="python keyword">-</code> <code class="python plain">Python </code><code class="python value">2.6</code><code class="python plain">.</code><code class="python value">2</code> <code class="python keyword">-</code><code class="python keyword">-</code> <code class="python keyword">/</code><code class="python plain">usr</code><code class="python keyword">/</code><code class="python functions">bin</code><code class="python keyword">/</code><code class="python plain">python</code></div><div class="line number5 index4 alt2"><code class="python plain">test </code><code class="python functions">object</code> <code class="python value">1</code><code class="python plain">: test_parametrize3.py</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">test_parametrize3.py:</code><code class="python value">14</code><code class="python plain">: TestSampleWithScenarios.test_demo[basic] PASS</code></div><div class="line number8 index7 alt1"><code class="python plain">test_parametrize3.py:</code><code class="python value">14</code><code class="python plain">: TestSampleWithScenarios.test_demo[advanced] PASS</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">2</code> <code class="python plain">passed </code><code class="python keyword">in</code> <code class="python value">0.06</code> <code class="python plain">seconds </code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python keyword">=</code></div></div></td></tr></tbody></table></div></div>
<p>Easy, isn’t it?</p>
</div>
<div class="section" id="playing-yourself">
<h2>Playing yourself</h2>
<p>If you want to play with the examples yourself, you can use <tt class="docutils literal"><span class="pre">hg</span> <span class="pre">clone</span> <span class="pre"><a href="https://bitbucket.org/hpk42/py-trunk/" rel="nofollow">https://bitbucket.org/hpk42/py-trunk/</a></span></tt> and <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">install</span></tt> it.  In the <tt class="docutils literal"><span class="pre">example/parametrize/</span></tt> direcrory you can tweak and run the test examples.  Let me know of comments or problems you may encounter.</p>
</div>
<div class="section" id="conclusion-deprecating-yield">
<h2>Conclusion: deprecating "yield"</h2>
<p>The three ports show that <tt class="docutils literal"><span class="pre">pytest_generate_tests</span></tt>
 is a hook that allows to implement many custom parametrization schemes.
   You can implement the hook in a test module or in local or global 
plugin, sharing it in your project or in the community.  The hook also 
integrates well with other usages of funcargs, see the extensive <a class="reference external" href="http://codespeak.net/py/trunk/test/funcargs.html">pytest funcarg documentation</a>.</p>
<p>The new way to parametrize test is meant to substitute yield usage of
 test-functions aka "generative tests", also used by nosetests. 
yield-style <a class="reference external" href="http://bruynooghe.blogspot.com/2008/09/generative-tests.html">Generative tests have received criticism</a> and despite being the one who invented them, i mostly agree and recommend not using them anymore.</p>
<p>I’d like to thank Samuele Pedroni and Ronny Pfannschmitt who helped 
to evolve the new hook and pushed me for implementing it.  Oh, and did i
 emphasize that working feedback-based and documentation driven is so 
much better than going wild on hypothetical usages?</p>
<p>have fun, holger</p>
</div>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>May 13, 2009 at 2:55 pm</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a>, <a href="http://holgerkrekel.net/category/testing/" rel="category tag">testing</a></p>
					</div>
	</div>
</div>
<div class="post-139 post type-post status-publish format-standard hentry category-metaprogramming category-testing tag-metaprogramming tag-testing">
	<h2 id="post-139"><a href="http://holgerkrekel.net/2009/04/18/pytest-beta1-shrinks-code-grows-plugins-integration-testing/" rel="bookmark">py.test: shrinks code, grows plugins and integration&nbsp;testing</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/04/18/pytest-beta1-shrinks-code-grows-plugins-integration-testing/#comments">leave a comment »</a></p>
	
	<div class="main">
		<p>Just before Pycon i uploaded the lean and mean <a class="reference" href="http://pypi.python.org/pypi/py/1.0.0b1">py.test 1.0.0b1</a>
 beta release.  A lot of code got moved out, most notably the greenlets 
C-extension. This simplifies packaging and increases the <a class="reference" href="http://pylib.org/">py lib’s focus</a> on <a class="reference" href="http://pytest.org/">test</a> facilities.  It now has a <a class="reference" href="http://codespeak.net/py/trunk/test/plugins.html">pluginized architecture</a> and provides <a class="reference" href="http://codespeak.net/py/trunk/test/funcargs.html">funcargs</a> which tremendously help with writing functional and integration tests.  One such example are <a class="reference" href="http://bitbucket.org/hpk42/py-trunk/src/tip/py/test/testing/acceptance_test.py">py.test’s own acceptance tests</a> checking behaviour of the command line tool from a user perspective.  Other <a class="reference" href="http://codespeak.net/py/trunk/test/features.html">features</a>  include a <strong>zero-install</strong> mechanism for <a class="reference" href="http://codespeak.net/py/dist/test-dist.html">distributing tests</a> which also allow to conveniently <a class="reference" href="http://tetamap.wordpress.com/2009/03/23/new-simultanously-test-your-code-on-all-platforms/">drive cross-platform integration tests</a>.</p>
<p>Unittesting, functional and integration testing are now official targets.  No doubt, <a class="reference" href="http://blog.objectmentor.com/articles/2009/04/13/x-tests-are-not-x-tests">Test category naming is a slippery subject</a> and it’s a good idea to consider <strong>test category names as labels</strong>
 rather than "either-or" categories.   In the end, tests are about being
 useful for software development which today means coding for a wide 
variety of environments and involving integration and deployment issues 
on every corner.  I think that testing tools yet have to develop their 
full potential.  In my opinion, automated testing and deployment 
techniques are to fully integrate with each other, and i consider coding
 of distributed integration test scenarios as key to that.</p>
<p>The upcoming final py.test 1.0 release i’d like to make a starting 
point for facilitating the integration of many more test methods and 
test mechanisms via plugins.  Some people already contributed a <a class="reference" href="http://codespeak.net/svn/py/trunk/py/test/plugin/pytest_figleaf.py">pytest_figleaf</a> (for coverage testing) and <a class="reference" href="http://codespeak.net/svn/py/trunk/contrib/pytest_twisted/__init__.py">pytest_twisted</a>
 (for running twisted style tests) although i am still only finalizing 
API details and writing up docs.  So I am very happy how things are 
turning out and also motivated by the positive feedback on the <a class="reference" href="http://blip.tv/search?q=py.test&amp;x=0&amp;y=0">two testing tutorials</a> that <a class="reference" href="http://blog.briandorsey.info/">Brian Dorsey</a> and me gave at Pycon (see <a class="reference" href="http://blog.briandorsey.info/2009/4/1/pycon-wrapup">his writeup</a>).</p>
<p>Btw, if you use the <a class="reference" href="http://codespeak.net/py/trunk/test/quickstart.html">quickstart</a> and encounter any problems, please use the <a class="reference" href="http://bitbucket.org/hpk42/py-trunk/issues/">brand new issue tracker</a> on bitbucket.  I started hosting a <a class="reference" href="http://bitbucket.org/hpk42/py-trunk/">mercurial py.test trunk repository</a>
 and so far it’s been a positive experience and I guess I fully switch 
to mercurial soon.  Alas, i probably drop setuptools before i go 1.0 
with py.test – it simply causes too many troubles. py.test’s trunk has a
 <a class="reference" href="http://bitbucket.org/hpk42/py-trunk/src/tip/setup.py">straightforward setup.py</a>
 and i intend to release a second beta with refined docs and removed 
setuptools. Stay tuned for many more news in May – right now, i am 
looking forward to some 1-week offline holiday <span class="wp-smiley wp-emoji wp-emoji-smile" title=":)">:)</span></p>
<p>cheers, holger</p>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>April 18, 2009 at 9:05 pm</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a>, <a href="http://holgerkrekel.net/category/testing/" rel="category tag">testing</a></p>
			<p>Tagged with <a href="http://holgerkrekel.net/tag/metaprogramming/" rel="tag">metaprogramming</a>, <a href="http://holgerkrekel.net/tag/testing/" rel="tag">testing</a></p>		</div>
	</div>
</div>
<div class="post-124 post type-post status-publish format-standard hentry category-metaprogramming category-testing">
	<h2 id="post-124"><a href="http://holgerkrekel.net/2009/03/23/new-simultanously-test-your-code-on-all-platforms/" rel="bookmark">new: simultanously test your code on all&nbsp;platforms</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/03/23/new-simultanously-test-your-code-on-all-platforms/#comments">with 5 comments</a></p>
	
	<div class="main">
		<p>It is now convenient to do test runs that transparently distribute a
 normal test run to multiple CPUs or processes. You can do local code 
changes and immediately distribute tests of your choice simultanously on
 all available platforms and python versions.</p>
<p>A small example.  Suppose you have a Python <tt class="docutils literal"><span class="pre">pkg</span></tt> directory containing the typical <tt class="docutils literal"><span class="pre">__init__.py</span></tt> and a <tt class="docutils literal"><span class="pre">test_something.py</span></tt> test file with this content:</p>
<div><div id="highlighter_84675" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys, os</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">def</code> <code class="python plain">test_pathsep():</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">assert</code> <code class="python plain">os.sep </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python string">"/"</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python keyword">def</code> <code class="python plain">test_platform():</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">assert</code> <code class="python plain">sys.platform !</code><code class="python keyword">=</code> <code class="python string">"darwin"</code></div></div></td></tr></tbody></table></div></div>
<p>Without further ado (no special configuration files, <em>no remote installations</em>) i can now run:</p>
<div><div id="highlighter_492930" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">py.test pkg</code><code class="python keyword">/</code><code class="python plain">test_something.py </code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">dist</code><code class="python keyword">=</code><code class="python plain">each </code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">rsyncdir</code><code class="python keyword">=</code><code class="python plain">pkg </code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">tx socket</code><code class="python keyword">=</code><code class="python value">192.168</code><code class="python plain">.</code><code class="python value">1.102</code><code class="python plain">:</code><code class="python value">8888</code>&nbsp; <code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">tx ssh</code><code class="python keyword">=</code><code class="python plain">noco </code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">tx popen</code><code class="python keyword">/</code><code class="python keyword">/</code><code class="python plain">python</code><code class="python keyword">=</code><code class="python plain">python2.</code><code class="python value">4</code></div></div></td></tr></tbody></table></div></div>
<p>This will rsync the "pkg" directory to the specified test execution 
places and then run tests on my windows machine (reachable through the 
specified socket-connection), my mac laptop (reachable through ssh) and 
in a local python 2.4 process. Here is the full <a class="reference external" href="http://paste.pocoo.org/show/109199/">output of the distributed test run</a> which shows 6 tests (4 passed, 2 failed), i.e. our 2 tests multiplied by 3 platforms.  It shows one expected failure like so:</p>
<div><div id="highlighter_61411" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">[</code><code class="python value">2</code><code class="python plain">] ssh</code><code class="python keyword">=</code><code class="python plain">noco </code><code class="python keyword">-</code><code class="python keyword">-</code> <code class="python plain">platform darwin, Python </code><code class="python value">2.5</code><code class="python plain">.</code><code class="python value">1</code><code class="python keyword">-</code><code class="python plain">final</code><code class="python keyword">-</code><code class="python value">0</code> <code class="python plain">cwd: </code><code class="python keyword">/</code><code class="python plain">Users</code><code class="python keyword">/</code><code class="python plain">hpk</code><code class="python keyword">/</code><code class="python plain">pyexecnetcache</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">test_platform():</code></div><div class="line number4 index3 alt1"><code class="python plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python plain">sys.platform !</code><code class="python keyword">=</code> <code class="python string">"darwin"</code></div><div class="line number5 index4 alt2"><code class="python plain">E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">assert</code> <code class="python string">'darwin'</code> <code class="python plain">!</code><code class="python keyword">=</code> <code class="python string">'darwin'</code></div><div class="line number6 index5 alt1"><code class="python plain">E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python keyword">+</code>&nbsp; <code class="python plain">where </code><code class="python string">'darwin'</code> <code class="python keyword">=</code> <code class="python plain">sys.platform</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python keyword">/</code><code class="python plain">Users</code><code class="python keyword">/</code><code class="python plain">hpk</code><code class="python keyword">/</code><code class="python plain">pyexecnetcache</code><code class="python keyword">/</code><code class="python plain">pkg</code><code class="python keyword">/</code><code class="python plain">test_something.py:</code><code class="python value">8</code><code class="python plain">: AssertionError</code></div></div></td></tr></tbody></table></div></div>
<p>Hope you find the output obvious enough.  I’ve written up some docs in the new <a class="reference external" href="http://codespeak.net/py/dist/test-dist.html">distributing tests</a> section.</p>
<p>I also just uploaded a 1.0 alpha py lib release so that you might 
type "easy_install -U py" to get the alpha release (use at your own 
risk!).  Did i mention that it passes all of its &gt;1000 tests on all 
platforms simultanously? <span class="wp-smiley wp-emoji wp-emoji-smile" title=":)">:)</span></p>
<p>This is all made possible by <a class="reference external" href="http://codespeak.net/py/dist/execnet.html">py.execnet</a>
 which is the underlying mechanism for instantiating local and remote 
processes through SSH- or socket servers and executing code in them, 
without requiring any prior installation on the remote sides.  <em>zero installation</em>
 really means that you only need a working python interpreter, nothing 
more.  You can make use of this functionality without using py.test.   
In fact, i plan to soon separate py.test and make the py lib smaller and
 smaller …</p>
<p>so, enjoy, hope it makes as much sense to you as it makes to me <span class="wp-smiley wp-emoji wp-emoji-smile" title=":)">:)</span>
 And hope to see some of you at Pycon … btw, anybody interested to join 
me for a Drum and Base party thursday night? cheers, holger</p>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>March 23, 2009 at 6:12 pm</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a>, <a href="http://holgerkrekel.net/category/testing/" rel="category tag">testing</a></p>
					</div>
	</div>
</div>
<div class="post-118 post type-post status-publish format-standard hentry category-metaprogramming">
	<h2 id="post-118"><a href="http://holgerkrekel.net/2009/03/11/python-connectivity-diving-bits-from-openbossa/" rel="bookmark">Python, connectivity, diving … bits from&nbsp;OpenBossa</a></h2>
			<p class="comments"><a href="http://holgerkrekel.net/2009/03/11/python-connectivity-diving-bits-from-openbossa/#comments">with 3 comments</a></p>
	
	<div class="main">
		<p><a href="http://tetamap.files.wordpress.com/2009/03/holger-dive1.jpg"><img src="metaprogramming-page3-aug4-2009_files/holger-dive1.jpg" alt="holger-dive1" title="holger-dive1" class="alignleft size-medium wp-image-119" height="225" width="300"></a></p>
<p>There is a lot of Python usage on Nokia Internet Tables and from INDT
 developers.  When asked, about half the audience, so something like 50 
people raised their hand for using and prefering Python.  The new 
iphone-like <a class="reference external" href="http://openbossa.indt.org/canola/">Canola2</a>
 interface was done in 4 months of development, told one of the 
developers, Gustavo Barbieri.  Realizing more features in less time, 
compared to Canola 1 in C.  Doesn’t mean there aren’t problems but 
overall they were quite happy.  Kate Alhola also presented "Freemantle",
 the new alpha software release which apparently does all its rendering 
via OpenGL-ES2.0 (this is OpenGL for Embedded systems). This was a talk 
packed with technical details – what i got is that Nokia is going quite 
open about their intentions and software.</p>
<p>Marcel Holtmann presented a new <a class="reference external" href="http://moblin.org/projects/connection-manager">linux connection manager</a>
  which completely does away with networking scripts and automates a lot
 of management.  One of its goals is to allow to have an IP address and 
efficiently work with DNS, without the need for 5 processes to startup 
first.  It can handle IP connections via wlan, ethernet, gsm,  bluetooth
 and works with a plugin arch.  All core components are GPLed and User 
Interfaces communicate via the DBUS.</p>
<p>Then Hadi Nahari presented his view on mobile and cloud security.  In
 his view, these two worlds have more security aspects in common.  Hadi 
currently works a security architect for Paypal and previously did that 
for EBay. He pushes for talking and thinking about "End to End" 
security, and "security assets in motion".  Looking at how my private 
information on a mobile phone is secured, how it moves from one 
execution environment to the next, is as important as looking how the 
backends handle this data.  True enough, many of the recent problems 
actually arose in the backends, not the end user devices.</p>
<p><a href="http://tetamap.files.wordpress.com/2009/03/dsc01439.jpg"><img src="metaprogramming-page3-aug4-2009_files/dsc01439.jpg" alt="my diving group" title="my diving group" class="alignleft size-medium wp-image-120" height="225" width="300"></a></p>
<p>Apart from the relaxed schedule, i am enjoying the views and people 
here. I spontanously joined a group with Stefan Seefeld from 
CodeSourcery (he does Boost+Python bindings, was another interesting 
talk!) and had my first diving session.  And i am scheduled to do my 
PyPy talk in 2 hours.  Curious to see how that goes.</p>
<p>cheers,</p>
<p>holger</p>
	</div>

	<div class="meta group">
		<div class="signature">
			<p>Written by holger krekel <span class="edit"></span></p>
			<p>March 11, 2009 at 11:09 am</p>
		</div>
		<div class="tags">
			<p>Posted in <a href="http://holgerkrekel.net/category/metaprogramming/" rel="category tag">metaprogramming</a></p>
					</div>
	</div>
</div>

<div class="navigation group">
	<div class="alignleft"><a href="http://holgerkrekel.net/category/metaprogramming/page/4/">« Older Entries</a></div>
	<div class="alignright"><a href="http://holgerkrekel.net/category/metaprogramming/page/2/">Newer Entries »</a></div>
</div>

</div>

<div id="sidebar">
<div style="overflow:hidden;"><a href="http://holgerkrekel.net/about-me/"><img src="metaprogramming-page3-aug4-2009_files/holger8b.jpg" class="alignnone" height="193" width="255"></a></div>
			<div class="textwidget"><div><a href="http://holgerkrekel.net/about-me/">about holger krekel</a></div>
<div><a href="http://holgerkrekel.net/feed/">Posts RSS Feed</a></div>
 <div><a href="http://holgerkrekel.net/comments/feed/">Comments RSS Feed</a></div>
</div>
		<h3><label for="subscribe-field">Follow Blog via Email</label></h3>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
											<p>Subscribe for posts by Email</p>
						<p><input name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" id="subscribe-field" type="text"></p>
					
					<p>
						<input name="action" value="subscribe" type="hidden">
						<input name="blog_id" value="6679328" type="hidden">
						<input name="source" value="http://holgerkrekel.net/category/metaprogramming/page/3/" type="hidden">
						<input name="sub-type" value="widget" type="hidden">
						<input name="redirect_fragment" value="blog_subscription-3" type="hidden">
						<input id="_wpnonce" name="_wpnonce" value="8367ce2497" type="hidden">						<input value="Follow" type="submit">
					</p>
				</form>
			
<h3><a href="http://twitter.com/hpk42">hpk42 on Twitter</a></h3><ul class="tweets">
			<li>
				Didn't know that Australian gov is now trying to control mathematics, crypto research, disclosure of vulnerabilities <a href="http://www.smh.com.au/it-pro/security-it/dangerous-minds-are-maths-teachers-australias-newest-threat-20150608-ghira9"> smh.com.au/it-pro/securit…</a> 				<a href="http://twitter.com/hpk42/statuses/607871209812979712" class="timesince">14&nbsp;hours&nbsp;ago</a>
			</li>

			
			<li>
				RT @<a href="http://twitter.com/benborges_">benborges_</a>: David Graeber and the Bureaucratic Utopia of Drone Warfare <a href="http://bit.ly/1MyvMv0"> bit.ly/1MyvMv0</a> <a href="http://t.co/0aNsLVRPQC" rel="nofollow">http://t.co/0aNsLVRPQC</a> 				<a href="http://twitter.com/hpk42/statuses/607869382514102273" class="timesince">14&nbsp;hours&nbsp;ago</a>
			</li>

			
			<li>
				The images of the G7 "world leader" meeting at castle Elmau could 
have been produced cheaper in Hollywood or Babelsberg or Photoshop. 				<a href="http://twitter.com/hpk42/statuses/607848686484357120" class="timesince">15&nbsp;hours&nbsp;ago</a>
			</li>

			</ul><iframe style="position: static; visibility: visible; width: 106px; height: 20px;" data-twttr-rendered="true" title="Twitter Follow Button" class="twitter-follow-button twitter-follow-button" src="metaprogramming-page3-aug4-2009_files/follow_button.html" allowtransparency="true" scrolling="no" id="twitter-widget-0" frameborder="0"></iframe><h3>Recent Comments</h3>				<table class="recentcommentsavatar" border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td title="graffic" class="recentcommentsavatartop" style="height:48px; width:48px;"><a href="http://javier.gr/" rel="nofollow"><img id="grav-3b3bf952736e9178b464831d6675f6ac-0" alt="" src="metaprogramming-page3-aug4-2009_files/3b3bf952736e9178b464831d6675f6ac.jpg" class="avatar avatar-48 grav-hashed" height="48" width="48"></a></td><td class="recentcommentstexttop" style=""><a href="http://javier.gr/" rel="nofollow">graffic</a> on <a href="http://holgerkrekel.net/2015/04/09/going-beyond-codes-of-conduct/#comment-2977">Going beyond codes of&nbsp;con…</a></td></tr><tr><td title="Going beyond codes of conduct | metaprogramming and politics" class="recentcommentsavatarend" style="height:48px; width:48px;"><a href="http://holgerkrekel.net/2015/04/09/going-beyond-codes-of-conduct/" rel="nofollow"><img alt="" src="metaprogramming-page3-aug4-2009_files/b3a31bdc09d8a9d15ba87f69d34ece75.png" class="avatar avatar-48" height="48" width="48"></a></td><td class="recentcommentstextend" style=""><a href="http://holgerkrekel.net/2015/04/09/going-beyond-codes-of-conduct/" rel="nofollow">Going beyond codes o…</a> on <a href="http://holgerkrekel.net/2012/12/14/traditional-family-models-in-the-it-and-python-world/#comment-2974">Traditional family models in t…</a></td></tr><tr><td title="holger krekel" class="recentcommentsavatarend" style="height:48px; width:48px;"><a href="http://merlinux.eu/" rel="nofollow"><img id="grav-1d40af73bd088f5f7b487b42b799881d-0" alt="" src="metaprogramming-page3-aug4-2009_files/1d40af73bd088f5f7b487b42b799881d.jpg" class="avatar avatar-48 grav-hashed" height="48" width="48"></a></td><td class="recentcommentstextend" style=""><a href="http://merlinux.eu/" rel="nofollow">holger krekel</a> on <a href="http://holgerkrekel.net/2015/01/24/thoughts-on-arguing-end-to-end-crypto-and-surveillance/#comment-2766">Thoughts on arguing end-to-end…</a></td></tr><tr><td title="Harry P" class="recentcommentsavatarend" style="height:48px; width:48px;"><img id="grav-03671a05389885dc096868846a08c5f8-0" alt="" src="metaprogramming-page3-aug4-2009_files/03671a05389885dc096868846a08c5f8.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"></td><td class="recentcommentstextend" style="">Harry P on <a href="http://holgerkrekel.net/2015/01/24/thoughts-on-arguing-end-to-end-crypto-and-surveillance/#comment-2760">Thoughts on arguing end-to-end…</a></td></tr><tr><td title="Harry P" class="recentcommentsavatarend" style="height:48px; width:48px;"><img id="grav-03671a05389885dc096868846a08c5f8-1" alt="" src="metaprogramming-page3-aug4-2009_files/03671a05389885dc096868846a08c5f8.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"></td><td class="recentcommentstextend" style="">Harry P on <a href="http://holgerkrekel.net/2015/01/24/thoughts-on-arguing-end-to-end-crypto-and-surveillance/#comment-2759">Thoughts on arguing end-to-end…</a></td></tr>				</tbody></table>
								<h3>Recent Posts</h3>		<ul>
					<li>
				<a href="http://holgerkrekel.net/2015/04/09/going-beyond-codes-of-conduct/">Going beyond codes of&nbsp;conduct</a>
						</li>
					<li>
				<a href="http://holgerkrekel.net/2015/02/27/pytest-development-reorganization-adopt-pytest-month/">pytest development reorganization, adopt pytest&nbsp;month!</a>
						</li>
					<li>
				<a href="http://holgerkrekel.net/2015/01/24/thoughts-on-arguing-end-to-end-crypto-and-surveillance/">Thoughts on arguing end-to-end crypto and&nbsp;surveillance</a>
						</li>
					<li>
				<a href="http://holgerkrekel.net/2013/11/12/running-tests-against-multiple-devicesresources-in-parallel/">Running tests against multiple devices/resources (in&nbsp;parallel)</a>
						</li>
					<li>
				<a href="http://holgerkrekel.net/2013/10/26/defating-sauron-with-the-trust-on-first-use-principle/">Defeating Sauron with the “Trust on first use”&nbsp;principle</a>
						</li>
				</ul>
		<form role="search" method="get" id="searchform" class="searchform" action="http://holgerkrekel.net/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input name="s" id="s" type="text">
					<input id="searchsubmit" value="Search" type="submit">
				</div>
			</form><h3>Archives</h3>		<ul>
	<li><a href="http://holgerkrekel.net/2015/04/">April 2015</a></li>
	<li><a href="http://holgerkrekel.net/2015/02/">February 2015</a></li>
	<li><a href="http://holgerkrekel.net/2015/01/">January 2015</a></li>
	<li><a href="http://holgerkrekel.net/2013/11/">November 2013</a></li>
	<li><a href="http://holgerkrekel.net/2013/10/">October 2013</a></li>
	<li><a href="http://holgerkrekel.net/2013/05/">May 2013</a></li>
	<li><a href="http://holgerkrekel.net/2013/03/">March 2013</a></li>
	<li><a href="http://holgerkrekel.net/2012/12/">December 2012</a></li>
	<li><a href="http://holgerkrekel.net/2012/11/">November 2012</a></li>
	<li><a href="http://holgerkrekel.net/2010/12/">December 2010</a></li>
	<li><a href="http://holgerkrekel.net/2010/02/">February 2010</a></li>
	<li><a href="http://holgerkrekel.net/2009/09/">September 2009</a></li>
	<li><a href="http://holgerkrekel.net/2009/08/">August 2009</a></li>
	<li><a href="http://holgerkrekel.net/2009/05/">May 2009</a></li>
	<li><a href="http://holgerkrekel.net/2009/04/">April 2009</a></li>
	<li><a href="http://holgerkrekel.net/2009/03/">March 2009</a></li>
	<li><a href="http://holgerkrekel.net/2009/02/">February 2009</a></li>
		</ul>


</div>

</div>

<div id="footer">
	<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com</a>. <a href="https://wordpress.com/themes/journalist/" title="Learn more about this theme">The Journalist v1.9 Theme</a>.</p>
</div>
		<script type="text/javascript">
		//<![CDATA[
		var infiniteScroll = {"settings":{"id":"content","ajaxurl":"http:\/\/holgerkrekel.net\/?infinity=scrolling","type":"scroll","wrapper":true,"wrapper_class":"infinite-wrap","footer":true,"click_handle":"1","text":"Older posts","totop":"Scroll back to top","currentday":"11.03.09","order":"DESC","scripts":[],"styles":[],"google_analytics":false,"offset":3,"history":{"host":"holgerkrekel.net","path":"\/category\/metaprogramming\/page\/%d\/","use_trailing_slashes":true,"parameters":""},"query_args":{"paged":3,"category_name":"metaprogramming","error":"","m":"","p":0,"post_parent":"","subpost":"","subpost_id":"","attachment":"","attachment_id":0,"name":"","static":"","pagename":"","page_id":0,"second":"","minute":"","hour":"","day":0,"monthnum":0,"year":0,"w":0,"tag":"","cat":36279,"tag_id":"","author":"","author_name":"","feed":"","tb":"","comments_popup":"","meta_key":"","meta_value":"","preview":"","s":"","sentence":"","fields":"","menu_order":"","category__in":[],"category__not_in":[],"category__and":[],"post__in":[],"post__not_in":[],"tag__in":[],"tag__not_in":[],"tag__and":[],"tag_slug__in":[],"tag_slug__and":[],"post_parent__in":[],"post_parent__not_in":[],"author__in":[],"author__not_in":[],"posts_per_page":7,"ignore_sticky_posts":false,"suppress_filters":false,"cache_results":false,"update_post_term_cache":true,"update_post_meta_cache":true,"post_type":"","nopaging":false,"comments_per_page":"20","no_found_rows":false,"order":"DESC"},"last_post_date":"2009-03-11 11:09:49","stats":"blog=6679328&v=wpcom&tz=-1&user_id=0&subd=tetamap&x_pagetype=infinite"}};
		//]]>
		</script>
		<!-- wpcom_wp_footer -->
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/wpgroho.js"></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-3b3bf952736e9178b464831d6675f6ac">
	</div>
	<div class="grofile-hash-map-1d40af73bd088f5f7b487b42b799881d">
	</div>
	<div class="grofile-hash-map-03671a05389885dc096868846a08c5f8">
	</div>
	</div>
		<div style="bottom: 0px;" id="infinite-footer">
			<div class="container">
				<div class="blog-info">
					<a title="Scroll back to top" id="infinity-blog-title" href="http://holgerkrekel.net/" rel="home">
						metaprogramming and politics					</a>
				</div>
				<div class="blog-credits">
					<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com</a>. <a href="https://wordpress.com/themes/journalist/" title="Learn more about this theme">The Journalist v1.9 Theme</a>.				</div>
			</div>
		</div><!-- #infinite-footer -->
		
	<div style="bottom: -276px;" id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow “metaprogramming and politics”</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input name="email" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter your email address" : this.value;' id="loggedout-follow-field" type="email"></p>

			<input name="action" value="subscribe" type="hidden">
			<input name="blog_id" value="6679328" type="hidden">
			<input name="source" value="http://holgerkrekel.net/category/metaprogramming/page/3/" type="hidden">
			<input name="sub-type" value="loggedout-follow" type="hidden">

			<input id="_wpnonce" name="_wpnonce" value="8367ce2497" type="hidden"><input name="_wp_http_referer" value="/category/metaprogramming/page/3/" type="hidden">
			<p id="bsub-subscribe-button"><input value="Sign me up" type="submit"></p>
			</form>
					<div id="bsub-credit"><a href="https://wordpress.com/?ref=lof">Build a website with WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->

	<div id="carousel-reblog-box">
		<form action="" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" onclick="if ( this.value == 'Add your thoughts here... (optional)' ) { this.value = ''; }" onblur="if ( this.value == '' || this.value == '' ) { this.value = 'Add your thoughts here... (optional)'; }">Add your thoughts here... (optional)</textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="" class="cancel">Cancel</a></span>
				<input name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" type="submit">
				<input id="carousel-reblog-blog-id" value="6679328" type="hidden">
				<input id="carousel-reblog-blog-url" value="http://holgerkrekel.net" type="hidden">
				<input id="carousel-reblog-blog-title" value="metaprogramming and politics" type="hidden">
				<input id="carousel-reblog-post-url" value="" type="hidden">
				<input id="carousel-reblog-post-title" value="" type="hidden">
			</div>

			<input id="_wpnonce" name="_wpnonce" value="dc474962cc" type="hidden"><input name="_wp_http_referer" value="/category/metaprogramming/page/3/" type="hidden">		</form>

		<div class="arrow"></div>
	</div>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/a_004"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?m=1422342134g&amp;ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<link rel="stylesheet" id="all-css-0" href="metaprogramming-page3-aug4-2009_files/jetpack-carousel.css" type="text/css" media="all">
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='http://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel-ie8fix.css?m=1412618825g&#038;ver=20121024' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="all-css-2" href="metaprogramming-page3-aug4-2009_files/tiled-gallery.css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var JetpackEmojiSettings = {"base_url":"http:\/\/s0.wp.com\/wp-content\/mu-plugins\/emoji\/twemoji\/"};
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"http:\/\/holgerkrekel.net\/wp-admin\/admin-ajax.php","nonce":"382dd0ea30","display_exif":"1","display_geo":"1","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/tetamap.wordpress.com\/wp-login.php?redirect_to=http%3A%2F%2Fholgerkrekel.net%2F2009%2F03%2F11%2Fpython-connectivity-diving-bits-from-openbossa%2F","local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=6679328&v=wpcom&tz=-1&user_id=0&subd=tetamap","is_public":"1"};
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"http:\/\/holgerkrekel.net\/wp-admin\/admin-ajax.php","nonce":"382dd0ea30","display_exif":"1","display_geo":"1","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/tetamap.wordpress.com\/wp-login.php?redirect_to=http%3A%2F%2Fholgerkrekel.net%2F2009%2F03%2F11%2Fpython-connectivity-diving-bits-from-openbossa%2F","local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=6679328&v=wpcom&tz=-1&user_id=0&subd=tetamap","is_public":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/a"></script>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/widgets.js"></script>
<script type="text/javascript" src="metaprogramming-page3-aug4-2009_files/a_003"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script type="text/javascript">
			jQuery.extend( infiniteScroll.settings.scripts, ["jquery","jquery-core","jquery-migrate","mobile-useragent-info","postmessage","jquery_inview","jetpack_resize","loggedout-subscribe","spin","jquery.spin","grofiles-cards","wpgroho","syntaxhighlighter-core","syntaxhighlighter-brush-python","syntaxhighlighter-brush-bash","devicepx","the-neverending-homepage","twemoji","jetpack-emoji","jetpack-emoji-init","swfobject","videopress","jetpack-carousel","twitter-widgets","twitter-widgets-infinity","twitter-widgets-pending","tiled-gallery"] );
			jQuery.extend( infiniteScroll.settings.styles, ["smileyproject","jetpack_likes","loggedout-subscribe","the-neverending-homepage","journalist-infinite-scroll","wpcom-core-compat-playlist-styles","mp6hacks","wpcom-bbpress2-staff-css","journalist","jetpack-emoji-css","noticons","geo-location-flair","reblogging","a8c-global-print","h4-global","journalist-ie6","jetpack-carousel","tiled-gallery","jetpack-carousel-ie8fix"] );
		</script><script src="metaprogramming-page3-aug4-2009_files/w.js" type="text/javascript" async="" defer="defer"></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'6679328','blog_tz':'-1','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'6679328','v':'wpcom','tz':'-1','user_id':'0','subd':'tetamap'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1LVmwrVi5vQS5fVFtfdHBbPyw1VXIrU3hWLHhmcmw0bWUwNis5Vk1qSEpzeXBoR2E/dmFIcl9HLjd1TGgrJm9kalImVUZGNEZjYjVlR1gseHYlYnFFVFdTdUpvdHxQajZ+JU1PeS0/bVlUSks/SzRJQjZaW1lsQ2JoP0U3fFJCcitMdjJiR35mYWslOGs3a1Amam1xRUZHVD18JjFwZnY1Q0xESC40eDZ5Lkl3UkQ5anlsfHZ4UHhLbi1BXz9rUmYvcWZjQkZIZkJyN1s2cG80LE9SWUF3MT9XT05fWjVZWi9MWERORHVQaDBzfFFhMEQzWn53RGYwX25aTkVLK0RiOG5XaWd6Y3olMHAsNE12T1I3NF9oUDBoJjhfL3NSJk5tOVtLeksrR0huSjhyNW1mcltpZzZvVVFLflFFUDlBTEFCSFtlNytqSDQra19MOF1iX00uSXlR'}]);
_stq.push([ 'clickTrackerInit', '6679328', '0' ]);
	</script>
<noscript><img src="http://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>

<img id="wpstats" src="metaprogramming-page3-aug4-2009_files/g.gif"></body></html>